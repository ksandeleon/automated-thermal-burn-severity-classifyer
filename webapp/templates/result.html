<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classification Result - Skin Burn Classifier</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet"
        href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        .debug-switch:checked {
            background-color: var(--accent-1) !important;
            border-color: var(--accent-2) !important;
            box-shadow: 0 0 0 0.2rem rgba(165, 182, 141, 0.25);
        }

        .debug-switch {
            background-color: var(--secondary-bg);
            border-color: var(--accent-1);
            transition: background 0.3s, border 0.3s;
        }

        /* Mobile-specific spacing improvements */
        <blade media|%20(max-width%3A%20767px)%20%7B>.container-fluid {
            padding: 1rem 0.75rem !important;
        }

        .main-card {
            margin: 0 !important;
        }

        .card-body-custom {
            padding: 1.5rem 1rem !important;
        }

        .card-header-custom {
            padding: 2rem 1rem !important;
        }

        /* Section spacing */
        .row.g-4 {
            row-gap: 2rem !important;
        }

        /* Result card spacing */
        .result-card {
            margin-bottom: 2rem !important;
        }

        /* Info cards spacing */
        .info-card {
            padding: 1.5rem 1rem !important;
            margin-bottom: 2rem !important;
        }

        /* Preview container spacing */
        .preview-container {
            margin-bottom: 1.5rem !important;
        }

        /* Section titles */
        .section-title {
            margin-bottom: 1.25rem !important;
            font-size: 1.1rem !important;
        }

        /* Result title */
        .result-title {
            font-size: 1.5rem !important;
            margin-bottom: 1rem !important;
        }

        /* Confidence box */
        .confidence-box {
            margin-bottom: 1.25rem !important;
        }

        /* Progress bars */
        .mb-3 {
            margin-bottom: 1.25rem !important;
        }

        /* Lists in info cards */
        .info-card ul {
            margin-bottom: 1rem !important;
            padding-left: 1.25rem !important;
        }

        .info-card li {
            margin-bottom: 0.5rem !important;
        }

        /* Disclaimer section */
        .disclaimer-section {
            margin-top: 2rem !important;
        }

        .disclaimer-card {
            padding: 1.5rem 1rem !important;
        }

        /* Debug toggle */
        .mb-4 {
            margin-bottom: 1.5rem !important;
        }

        /* Action buttons */
        .btn-custom {
            padding: 0.875rem 1.5rem !important;
            width: 100% !important;
        }

        /* Header elements */
        .header-icon {
            margin-bottom: 1rem !important;
        }

        .display-4 {
            font-size: 2rem !important;
        }

        .lead {
            font-size: 1rem !important;
        }
        }

        /* Small mobile (< 375px) */
        <blade media|%20(max-width%3A%20374px)%20%7B>.card-body-custom {
            padding: 1.25rem 0.75rem !important;
        }

        .info-card {
            padding: 1.25rem 0.75rem !important;
        }
        }

        /* Tailwind-Inspired Clinical Assessment Design */
        .clinical-assessment {
            margin-top: 2rem;
        }

        /* Compact Header */
        .assessment-header {
            margin-bottom: 1.5rem;
            padding: 1rem 0;
            border-bottom: 1px solid rgba(165, 182, 141, 0.2);
        }

        .severity-indicator-compact {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.1rem;
            color: white;
            flex-shrink: 0;
        }

        .severity-indicator-compact.severity-normal {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .severity-indicator-compact.severity-first {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .severity-indicator-compact.severity-second {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        .severity-indicator-compact.severity-third {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }

        .severity-indicator-compact.severity-fourth {
            background: linear-gradient(135deg, #7c3aed, #5b21b6);
        }

        .assessment-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text-dark);
            margin: 0;
            letter-spacing: -0.025em;
        }

        .assessment-subtitle {
            font-size: 0.875rem;
            color: var(--text-light);
            margin: 0;
            font-weight: 500;
        }

        /* Main Content Grid */
        .clinical-grid {
            display: grid;
            gap: 1.5rem;
        }

        /* Diagnosis Card - Full Width Hero */
        .diagnosis-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease;
        }

        .diagnosis-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
        }

        .diagnosis-header {
            background: linear-gradient(135deg, var(--accent-1) 0%, var(--accent-2) 100%);
            padding: 1.5rem;
            position: relative;
            overflow: hidden;
        }

        .diagnosis-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255, 255, 255, 0.1) 0%, transparent 100%);
            pointer-events: none;
        }

        .diagnosis-icon {
            width: 2.75rem;
            height: 2.75rem;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.25rem;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .diagnosis-title-main {
            font-size: 1.375rem;
            font-weight: 800;
            color: white;
            margin: 0;
            letter-spacing: -0.025em;
        }

        .diagnosis-classification {
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.85);
            margin: 0;
            font-weight: 500;
        }

        .urgency-indicator {
            padding: 0.5rem 1rem;
            border-radius: 50px;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            text-align: center;
        }

        .urgency-indicator.urgency-none {
            background: rgba(16, 185, 129, 0.2);
        }

        .urgency-indicator.urgency-low {
            background: rgba(16, 185, 129, 0.2);
        }

        .urgency-indicator.urgency-moderate {
            background: rgba(245, 158, 11, 0.2);
        }

        .urgency-indicator.urgency-high {
            background: rgba(239, 68, 68, 0.2);
        }

        .urgency-indicator.urgency-critical {
            background: rgba(124, 58, 237, 0.2);
            border-color: rgba(239, 68, 68, 0.8);
            animation: pulse-urgent 2s infinite;
        }

        <blade keyframes|%20pulse-urgent%20%7B>0%,
        100% {
            box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7);
            transform: scale(1);
        }

        50% {
            box-shadow: 0 0 0 10px rgba(239, 68, 68, 0);
            transform: scale(1.02);
        }
        }

        .urgency-text {
            font-size: 0.75rem;
            font-weight: 700;
            color: white;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .diagnosis-content {
            padding: 2rem;
        }

        .diagnosis-description {
            font-size: 1rem;
            line-height: 1.75;
            color: var(--text-dark);
            margin: 0;
            font-weight: 500;
        }

        /* Treatment Grid */
        .treatment-grid {
            display: grid;
            gap: 1.5rem;
            grid-template-columns: 1fr;
        }

        .treatment-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.06);
            transition: all 0.3s ease;
        }

        .treatment-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .treatment-card-header {
            padding: 1.5rem 1.5rem 1rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .treatment-icon {
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.1rem;
            flex-shrink: 0;
        }

        .treatment-icon.success {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .treatment-icon.danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }

        .treatment-icon.info {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        }

        .treatment-card-title {
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--text-dark);
            margin: 0;
            letter-spacing: -0.025em;
        }

        .treatment-steps {
            list-style: none;
            padding: 0 1.5rem 1.5rem 1.5rem;
            margin: 0;
        }

        .treatment-step {
            position: relative;
            padding: 0.75rem 0 0.75rem 2rem;
            margin: 0;
            font-size: 0.9375rem;
            line-height: 1.6;
            color: var(--text-dark);
            font-weight: 500;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
        }

        .treatment-step:last-child {
            border-bottom: none;
        }

        .immediate-care .treatment-step::before {
            content: '';
            position: absolute;
            left: 0;
            top: 1rem;
            width: 1rem;
            height: 1rem;
            background: linear-gradient(135deg, #10b981, #059669);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .immediate-care .treatment-step::after {
            content: '✓';
            position: absolute;
            left: 0.25rem;
            top: 0.9rem;
            color: white;
            font-size: 0.625rem;
            font-weight: bold;
        }

        .avoid-actions .treatment-step::before {
            content: '';
            position: absolute;
            left: 0;
            top: 1rem;
            width: 1rem;
            height: 1rem;
            background: linear-gradient(135deg, #ef4444, #dc2626);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .avoid-actions .treatment-step::after {
            content: '×';
            position: absolute;
            left: 0.25rem;
            top: 0.9rem;
            color: white;
            font-size: 0.75rem;
            font-weight: bold;
        }

        .medical-decision .treatment-step::before {
            content: '';
            position: absolute;
            left: 0;
            top: 1rem;
            width: 1rem;
            height: 1rem;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .medical-decision .treatment-step::after {
            content: 'i';
            position: absolute;
            left: 0.375rem;
            top: 0.9rem;
            color: white;
            font-size: 0.625rem;
            font-weight: bold;
            font-style: italic;
        }

        /* Medical Recommendation */
        .medical-recommendation {
            padding: 0 1.5rem 1.5rem 1.5rem;
        }

        .recommendation-level {
            padding: 1.25rem;
            border-radius: 12px;
            border-left: 4px solid;
        }

        .level-none {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.08) 0%, rgba(5, 150, 105, 0.04) 100%);
            border-left-color: #059669;
        }

        .level-monitor {
            background: linear-gradient(135deg, rgba(107, 114, 128, 0.08) 0%, rgba(75, 85, 99, 0.04) 100%);
            border-left-color: #4b5563;
        }

        .level-caution {
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.08) 0%, rgba(217, 119, 6, 0.04) 100%);
            border-left-color: #d97706;
        }

        .level-urgent {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.08) 0%, rgba(220, 38, 38, 0.04) 100%);
            border-left-color: #dc2626;
        }

        .level-critical {
            background: linear-gradient(135deg, rgba(124, 58, 237, 0.12) 0%, rgba(91, 33, 182, 0.06) 100%);
            border-left-color: #7c3aed;
            border: 2px solid rgba(239, 68, 68, 0.2);
            animation: pulse-critical 3s infinite;
        }

        <blade keyframes|%20pulse-critical%20%7B>0%,
        100% {
            border-color: rgba(239, 68, 68, 0.2);
            box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4);
        }

        50% {
            border-color: rgba(124, 58, 237, 0.4);
            box-shadow: 0 0 0 8px rgba(239, 68, 68, 0);
        }
        }

        .recommendation-title {
            font-size: 1rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            color: var(--text-dark);
            letter-spacing: -0.025em;
        }

        .recommendation-text {
            font-size: 0.9375rem;
            line-height: 1.6;
            margin: 0;
            color: var(--text-light);
            font-weight: 500;
        }

        /* Responsive Grid */
        <blade media|%20(min-width%3A%20768px)%20%7B>.treatment-grid {
            grid-template-columns: 1fr 1fr;
        }

        .medical-decision {
            grid-column: 1 / -1;
        }

        .assessment-title {
            font-size: 1.5rem;
        }

        .assessment-subtitle {
            font-size: 1rem;
        }

        .severity-indicator-compact {
            width: 3rem;
            height: 3rem;
            font-size: 1.25rem;
        }

        .diagnosis-title-main {
            font-size: 1.5rem;
        }

        .treatment-card-title {
            font-size: 1.25rem;
        }

        .treatment-step {
            font-size: 1rem;
        }
        }

        <blade media|%20(min-width%3A%201024px)%20%7B>.clinical-grid {
            gap: 2rem;
        }

        .treatment-grid {
            grid-template-columns: 1fr 1fr 1fr;
            gap: 2rem;
        }

        .medical-decision {
            grid-column: auto;
        }

        .diagnosis-content {
            padding: 2.5rem;
        }

        .treatment-card-header {
            padding: 2rem 2rem 1.25rem 2rem;
        }

        .treatment-steps {
            padding: 0 2rem 2rem 2rem;
        }

        .medical-recommendation {
            padding: 0 2rem 2rem 2rem;
        }
        }
    </style>
</head>

<body>
    <!-- Background with animated gradient -->
    <div class="main-bg">
        <div class="gradient-overlay"></div>
        <div class="floating-shapes">
            <div class="shape shape-1"></div>
            <div class="shape shape-2"></div>
            <div class="shape shape-3"></div>
            <div class="shape shape-4"></div>
        </div>
    </div>
    <div class="container-fluid min-vh-100 d-flex align-items-center justify-content-center py-3 py-md-5 px-2 px-sm-3">
        <div class="row w-100 justify-content-center">
            <div class="col-xl-8 col-lg-10 col-md-11 col-12">
                <div class="main-card shadow-lg">
                    <!-- Header Section -->
                    <div class="card-header-custom text-center">
                        <div class="header-icon mb-3">
                            <i class="fas fa-fire-flame-curved"></i>
                        </div>
                        <h1 class="display-4 fw-bold mb-2">Classification Results</h1>
                        <p class="lead mb-0">AI-Powered Skin Burn Severity Analysis</p>
                        <div class="header-underline"></div>
                    </div>
                    <!-- Body Section -->
                    <div class="card-body-custom">
                        <!-- Debug Toggle -->
                        <div class="mb-4 d-flex justify-content-end align-items-center gap-2" style="min-width:220px;">
                            <span class="fw-semibold text-dark d-flex align-items-center gap-2"
                                style="font-size:1.05rem;">
                                <i class="fas fa-eye text-secondary"></i> Attention Map
                            </span>
                            <div class="form-switch d-flex align-items-center">
                                <input type="checkbox" id="debugToggle" class="form-check-input debug-switch"
                                    style="width:2.5em;height:1.5em;cursor:pointer;vertical-align:middle;">
                            </div>
                        </div>
                        <div class="row g-4">
                            <!-- Image Display -->
                            <div class="col-md-6">
                                <h5 class="section-title mb-3">
                                    <i class="fas fa-image me-2"></i>Analyzed Image
                                </h5>
                                <div class="preview-container mx-auto" style="max-width:400px;">
                                    <img src="{{ image_path }}" alt="Uploaded burn image" class="preview-image">
                                </div>
                            </div>
                            <!-- Results -->
                            <div class="col-md-6">
                                <h5 class="section-title mb-3">
                                    <i class="fas fa-brain me-2"></i>Classification Result
                                </h5>
                                <div class="result-card card mb-4 p-3 border-0 shadow-sm">
                                    <div class="text-center mb-3">
                                        <h2
                                            class="fw-bold mb-2 result-title d-flex align-items-center justify-content-center gap-2 {% if result.class_id == 4 %}text-success{% elif result.class_id == 0 %}text-warning{% else %}text-danger{% endif %}">
                                            {% if result.class_id == 4 %}<i class="fas fa-leaf text-success"></i>
                                            {% elif result.class_id == 0 %}<i class="fas fa-fire text-warning"></i>
                                            {% elif result.class_id == 1 %}<i
                                                class="fas fa-exclamation-triangle text-danger"></i>
                                            {% elif result.class_id == 2 %}<i
                                                class="fas fa-exclamation-triangle text-danger"></i>
                                            {% else %}<i class="fas fa-ban text-secondary"></i>
                                            {% endif %}
                                            {{ result.predicted_class }}
                                        </h2>
                                        <div class="confidence-box mx-auto mb-2 p-2 rounded-3 bg-light border">
                                            <span class="fw-semibold text-dark">Confidence:</span>
                                            <span
                                                class="fs-5 fw-bold ms-2">{{ "%.2f"|format(result.confidence * 100) }}%</span>
                                        </div>
                                    </div>
                                    <h6 class="mb-2">Detailed Probabilities:</h6>
                                    <div class="mb-3">
                                        {% for class_name, probability in result.all_probabilities.items() %}
                                        <div class="mb-3">
                                            <div class="d-flex justify-content-between align-items-center mb-1">
                                                <span class="fw-semibold">
                                                    {% if loop.index == 1 %}<i
                                                        class="fas fa-fire text-warning me-1"></i>
                                                    {% elif loop.index == 2 %}<i
                                                        class="fas fa-exclamation-triangle text-danger me-1"></i>
                                                    {% elif loop.index == 3 %}<i
                                                        class="fas fa-exclamation-triangle text-danger me-1"></i>
                                                    {% elif loop.index == 4 %}<i
                                                        class="fas fa-ban text-secondary me-1"></i>
                                                    {% else %}<i class="fas fa-leaf text-success me-1"></i>
                                                    {% endif %}
                                                    {{ class_name }}:
                                                </span>
                                                <span
                                                    class="fw-bold">{{ "%.2f"|format(probability * 100) }}%</span>
                                            </div>
                                            <div class="progress custom-progress"
                                                style="height: 12px; background: #f3f3f3; border-radius: 8px;">
                                                <div class="progress-bar
                                                    {% if loop.index == 1 %}bg-warning
                                                    {% elif loop.index == 5 %}bg-success
                                                    {% else %}bg-danger
                                                    {% endif %}" role="progressbar"
                                                    style="width: {{ probability * 100 }}%; border-radius: 8px; transition: width 0.6s cubic-bezier(0.4,0,0.2,1);">
                                                </div>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Grad-CAM Overlay (hidden by default) -->
                        <div class="row mb-4" id="gradcamSection" style="display:none;">
                            <div class="col-md-6">
                                <h5 class="section-title mb-3">
                                    <i class="fas fa-layer-group me-2"></i>Grad-CAM Overlay
                                </h5>
                                <div class="preview-container mx-auto" style="max-width:400px;">
                                    <img src="{{ overlay_path }}" alt="Grad-CAM overlay" class="preview-image">
                                </div>
                            </div>
                        </div>

                        <!-- Debug Info (hidden by default) -->
                        <div class="alert alert-secondary mt-3" id="debugInfo" style="display:none;" role="alert">
                            <strong>DEBUG:</strong><br>
                            image_path: {{ image_path }}<br>
                            overlay_path: {{ overlay_path }}<br>
                            Model Prediction: {{ result.predicted_class }}<br>
                            Confidence: {{ "%.2f"|format(result.confidence * 100) }}%<br>
                            Probabilities: {{ result.all_probabilities }}<br>
                        </div>

                        <!-- Primary Classification Results Section -->
                        <section class="clinical-assessment mt-5">
                            <!-- Compact Header -->
                            <div class="assessment-header">
                                <div class="d-flex align-items-center gap-3">
                                    <div class="severity-indicator-compact
                                        {% if result.class_id == 4 %}severity-normal
                                        {% elif result.class_id == 0 %}severity-first
                                        {% elif result.class_id == 1 %}severity-second
                                        {% elif result.class_id == 2 %}severity-third
                                        {% else %}severity-fourth
                                        {% endif %}">
                                        {% if result.class_id == 4 %}<i class="fas fa-check-circle"></i>
                                        {% elif result.class_id == 0 %}<i class="fas fa-thermometer-quarter"></i>
                                        {% elif result.class_id == 1 %}<i class="fas fa-thermometer-half"></i>
                                        {% elif result.class_id == 2 %}<i class="fas fa-thermometer-three-quarters"></i>
                                        {% else %}<i class="fas fa-thermometer-full"></i>
                                        {% endif %}
                                    </div>
                                    <div>
                                        <h3 class="assessment-title">Clinical Assessment</h3>
                                        <p class="assessment-subtitle">Professional medical analysis and care
                                            recommendations</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Main Content Grid -->
                            <div class="clinical-grid">

                                <!-- Diagnosis Card - Full Width, Prominent -->
                                <div class="diagnosis-card">
                                    <div class="diagnosis-header">
                                        <div class="d-flex align-items-center justify-content-between">
                                            <div class="d-flex align-items-center gap-3">
                                                <div class="diagnosis-icon">
                                                    <i class="fas fa-stethoscope"></i>
                                                </div>
                                                <div>
                                                    <h4 class="diagnosis-title-main">
                                                        {% if result.class_id == 4 %}Normal Skin / No Burn Detected
                                                        {% elif result.class_id == 0 %}First-Degree Burn (Superficial)
                                                        {% elif result.class_id == 1 %}Second-Degree Burn (Partial
                                                        Thickness)
                                                        {% elif result.class_id == 2 %}Third-Degree Burn (Full
                                                        Thickness)
                                                        {% else %}Fourth-Degree Burn (Deep Full Thickness)
                                                        {% endif %}
                                                    </h4>
                                                    <p class="diagnosis-classification">Burn Severity Classification</p>
                                                </div>
                                            </div>
                                            <div class="urgency-indicator
                                                {% if result.class_id == 4 %}urgency-none
                                                {% elif result.class_id == 0 %}urgency-low
                                                {% elif result.class_id == 1 %}urgency-moderate
                                                {% elif result.class_id == 2 %}urgency-high
                                                {% else %}urgency-critical
                                                {% endif %}">
                                                <span class="urgency-text">
                                                    {% if result.class_id == 4 %}No Urgency
                                                    {% elif result.class_id == 0 %}Low Urgency
                                                    {% elif result.class_id == 1 %}Moderate Urgency
                                                    {% elif result.class_id == 2 %}High Urgency
                                                    {% else %}Critical Emergency
                                                    {% endif %}
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="diagnosis-content">
                                        <p class="diagnosis-description">
                                            {% if result.class_id == 4 %}No signs of thermal injury identified. Skin
                                            appears healthy and intact with normal color and texture.
                                            {% elif result.class_id == 0 %}Affects only the epidermis (outer skin
                                            layer). Characterized by redness, mild pain, and dry skin. Typically heals
                                            within 3-7 days without scarring.
                                            {% elif result.class_id == 1 %}Involves both epidermis and dermis layers.
                                            May present with blistering, severe pain, and swelling. Requires careful
                                            monitoring for infection and proper wound care.
                                            {% elif result.class_id == 2 %}Destroys all layers of skin and may affect
                                            deeper tissues. Appears white, charred, or leathery. Requires immediate
                                            medical intervention and surgical treatment.
                                            {% else %}Life-threatening injury extending through skin into muscle, bone,
                                            and internal structures. Requires immediate emergency surgery and intensive
                                            care management.
                                            {% endif %}
                                        </p>
                                    </div>
                                </div>

                                <!-- Treatment Protocol Grid -->
                                <div class="treatment-grid">

                                    <!-- Immediate Care Card -->
                                    <div class="treatment-card immediate-care">
                                        <div class="treatment-card-header">
                                            <div class="treatment-icon success">
                                                <i class="fas fa-hand-holding-medical"></i>
                                            </div>
                                            <h5 class="treatment-card-title">Immediate Care</h5>
                                        </div>
                                        <ul class="treatment-steps">
                                            {% if result.class_id == 4 %}
                                            <li class="treatment-step">Continue normal skin care routine</li>
                                            <li class="treatment-step">Monitor for any changes or irritation</li>
                                            <li class="treatment-step">Maintain proper skin hydration</li>
                                            <li class="treatment-step">Apply sunscreen if exposed to UV</li>
                                            {% elif result.class_id == 0 %}
                                            <li class="treatment-step">Cool with running water for 10-15 minutes</li>
                                            <li class="treatment-step">Apply aloe vera gel or cool compress</li>
                                            <li class="treatment-step">Take over-the-counter pain relief if needed</li>
                                            <li class="treatment-step">Keep the area clean and moisturized</li>
                                            {% elif result.class_id == 1 %}
                                            <li class="treatment-step">Cool with water for 15-20 minutes</li>
                                            <li class="treatment-step">Apply sterile, non-adherent dressing</li>
                                            <li class="treatment-step">Elevate affected area if possible</li>
                                            <li class="treatment-step">Monitor for signs of infection</li>
                                            {% elif result.class_id == 2 %}
                                            <li class="treatment-step">Cover with clean, dry cloth</li>
                                            <li class="treatment-step">Call emergency services immediately</li>
                                            <li class="treatment-step">Monitor vital signs and breathing</li>
                                            <li class="treatment-step">Prepare for emergency transport</li>
                                            {% else %}
                                            <li class="treatment-step">Call 911 / emergency services now</li>
                                            <li class="treatment-step">Cover loosely with sterile cloth</li>
                                            <li class="treatment-step">Monitor breathing and circulation</li>
                                            <li class="treatment-step">Prepare for immediate transport</li>
                                            {% endif %}
                                        </ul>
                                    </div>

                                    <!-- Avoid Actions Card -->
                                    <div class="treatment-card avoid-actions">
                                        <div class="treatment-card-header">
                                            <div class="treatment-icon danger">
                                                <i class="fas fa-exclamation-triangle"></i>
                                            </div>
                                            <h5 class="treatment-card-title">Avoid These Actions</h5>
                                        </div>
                                        <ul class="treatment-steps">
                                            {% if result.class_id == 4 %}
                                            <li class="treatment-step">No specific restrictions needed</li>
                                            <li class="treatment-step">Avoid harsh or irritating products</li>
                                            <li class="treatment-step">Don't over-treat normal skin</li>
                                            <li class="treatment-step">Avoid excessive scrubbing or friction</li>
                                            {% elif result.class_id == 0 %}
                                            <li class="treatment-step">Don't apply ice directly to skin</li>
                                            <li class="treatment-step">Avoid breaking any blisters that form</li>
                                            <li class="treatment-step">Don't use butter, oils, or home remedies</li>
                                            <li class="treatment-step">Avoid petroleum-based products</li>
                                            {% elif result.class_id == 1 %}
                                            <li class="treatment-step">Never pop or drain blisters</li>
                                            <li class="treatment-step">Avoid ice or very cold water</li>
                                            <li class="treatment-step">Don't use adhesive bandages on burn</li>
                                            <li class="treatment-step">Avoid cotton or fluffy materials</li>
                                            {% elif result.class_id == 2 %}
                                            <li class="treatment-step">Don't remove stuck clothing/debris</li>
                                            <li class="treatment-step">Avoid ice, ointments, or creams</li>
                                            <li class="treatment-step">Don't immerse in water</li>
                                            <li class="treatment-step">Never attempt home treatment</li>
                                            {% else %}
                                            <li class="treatment-step">Don't attempt any home treatment</li>
                                            <li class="treatment-step">Never remove embedded materials</li>
                                            <li class="treatment-step">Avoid any topical treatments</li>
                                            <li class="treatment-step">Don't delay emergency care</li>
                                            {% endif %}
                                        </ul>
                                    </div>

                                    <!-- Medical Decision Card -->
                                    <div class="treatment-card medical-decision">
                                        <div class="treatment-card-header">
                                            <div class="treatment-icon info">
                                                <i class="fas fa-user-md"></i>
                                            </div>
                                            <h5 class="treatment-card-title">When to Seek Medical Care</h5>
                                        </div>
                                        <div class="medical-recommendation">
                                            {% if result.class_id == 4 %}
                                            <div class="recommendation-level level-none">
                                                <h6 class="recommendation-title">No Medical Intervention Required</h6>
                                                <p class="recommendation-text">Continue routine skin care. Consult a
                                                    dermatologist if you notice any unusual changes, persistent
                                                    irritation, or new lesions that don't heal normally.</p>
                                            </div>
                                            {% elif result.class_id == 0 %}
                                            <div class="recommendation-level level-monitor">
                                                <h6 class="recommendation-title">Self-Care with Monitoring</h6>
                                                <p class="recommendation-text">Most first-degree burns heal on their
                                                    own. <strong>Seek medical care if:</strong> pain increases
                                                    significantly, burn covers area larger than your palm, signs of
                                                    infection appear, or healing doesn't progress after 3-5 days.</p>
                                            </div>
                                            {% elif result.class_id == 1 %}
                                            <div class="recommendation-level level-caution">
                                                <h6 class="recommendation-title">Medical Evaluation Recommended</h6>
                                                <p class="recommendation-text"><strong>See a healthcare provider
                                                        if:</strong> burn is larger than 3 inches, located on
                                                    face/hands/feet/genitals, shows signs of infection (increased pain,
                                                    pus, red streaking), or if you have diabetes/immune compromise.</p>
                                            </div>
                                            {% elif result.class_id == 2 %}
                                            <div class="recommendation-level level-urgent">
                                                <h6 class="recommendation-title">Emergency Medical Care Required</h6>
                                                <p class="recommendation-text"><strong>Go to emergency room
                                                        immediately.</strong> Third-degree burns always require
                                                    professional medical treatment, wound debridement, and may need skin
                                                    grafting. Do not delay seeking care.</p>
                                            </div>
                                            {% else %}
                                            <div class="recommendation-level level-critical">
                                                <h6 class="recommendation-title">Call Emergency Services Now</h6>
                                                <p class="recommendation-text"><strong>This is a life-threatening
                                                        emergency.</strong> Fourth-degree burns require immediate
                                                    surgical intervention and intensive care. Call 911 or emergency
                                                    services immediately and prepare for emergency transport.</p>
                                            </div>
                                            {% endif %}
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </section>
                        <!-- Emergency and Medical Guidance Section -->
                        <section class="mb-4">
                            <div class="info-card p-4 rounded-4 shadow-sm"
                                style="background: linear-gradient(135deg, #fffbe6 0%, #ffeaea 100%);">
                                <div class="d-flex align-items-center mb-3">
                                    <span class="info-icon me-3"><i
                                            class="fas fa-ambulance text-danger fa-lg"></i></span>
                                    <h5 class="fw-bold mb-0 text-dark">Emergency & Medical Guidance</h5>
                                </div>
                                <div class="mb-2">
                                    <strong>Emergency Assessment Indicators:</strong>
                                    <ul class="mb-2">
                                        <li>Burns covering large areas or critical locations (face, hands, feet,
                                            genitals).</li>
                                        <li>Signs of shock (pale, clammy skin, rapid pulse).</li>
                                        <li>Difficulty breathing or burns to airway.</li>
                                    </ul>
                                </div>
                                <div class="mb-2">
                                    <strong>First Aid Instructions:</strong>
                                    <ul class="mb-2">
                                        <li>Remove the person from the source of the burn.</li>
                                        <li>Cool the burn with running water (not ice) for 10-20 minutes.</li>
                                        <li>Cover with a clean, non-stick bandage.</li>
                                    </ul>
                                </div>
                                <div>
                                    <strong>When to See a Healthcare Provider:</strong>
                                    <ul>
                                        <li>If the burn is deep, large, or on sensitive areas.</li>
                                        <li>If there are signs of infection (pus, increased pain, redness).</li>
                                        <li>If healing does not progress or if in doubt, seek medical advice.</li>
                                    </ul>
                                </div>
                            </div>
                        </section>

                        <!-- Action Buttons -->
                        <div class="row mt-4">
                            <div class="col-12 text-center">
                                <a href="{{ url_for('index') }}" class="btn-custom btn-primary">
                                    <span class="btn-icon"><i class="fas fa-rotate-right"></i></span>
                                    <span class="btn-text">Classify Another Image</span>
                                </a>
                            </div>
                        </div>

                        <!-- Disclaimer -->
                        <section class="disclaimer-section mt-5">
                            <div class="disclaimer-card">
                                <div class="disclaimer-icon">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <div class="disclaimer-content">
                                    <h6 class="disclaimer-title">Medical Disclaimer</h6>
                                    <p class="disclaimer-text">
                                        This AI tool is designed for educational and research purposes only. It should
                                        not be used as a substitute for professional medical diagnosis or treatment.
                                        Always consult qualified healthcare professionals for medical assessment and
                                        care.
                                    </p>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script>
        document.getElementById('debugToggle').addEventListener('change', function () {
            const debugInfo = document.getElementById('debugInfo');
            const gradcamSection = document.getElementById('gradcamSection');
            if (this.checked) {
                debugInfo.style.display = '';
                gradcamSection.style.display = '';
            } else {
                debugInfo.style.display = 'none';
                gradcamSection.style.display = 'none';
            }
        });
    </script>
</body>

</html>
